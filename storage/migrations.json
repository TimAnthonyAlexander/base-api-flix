{
    "version": "1.0",
    "migrations": [
        {
            "id": "mig_f457ce453562",
            "sql": "CREATE TABLE \"api_token\" (\n  \"user_id\" TEXT NOT NULL DEFAULT '',\n  \"name\" TEXT NOT NULL,\n  \"token_hash\" TEXT NOT NULL,\n  \"expires_at\" TEXT,\n  \"last_used_at\" TEXT,\n  \"id\" TEXT PRIMARY KEY NOT NULL DEFAULT '',\n  \"created_at\" DATETIME DEFAULT CURRENT_TIMESTAMP,\n  \"updated_at\" DATETIME DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (\"user_id\") REFERENCES \"user\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n)",
            "destructive": false,
            "generated_at": "2025-10-03T16:37:55+00:00",
            "table": "api_token",
            "operation": "create_table",
            "warning": null
        },
        {
            "id": "mig_28f747136577",
            "sql": "CREATE TABLE \"user\" (\n  \"name\" TEXT NOT NULL DEFAULT '',\n  \"password\" TEXT NOT NULL DEFAULT '',\n  \"email\" TEXT NOT NULL DEFAULT '',\n  \"active\" INTEGER NOT NULL DEFAULT '1',\n  \"id\" TEXT PRIMARY KEY NOT NULL DEFAULT '',\n  \"created_at\" DATETIME DEFAULT CURRENT_TIMESTAMP,\n  \"updated_at\" DATETIME DEFAULT CURRENT_TIMESTAMP\n)",
            "destructive": false,
            "generated_at": "2025-10-03T16:37:55+00:00",
            "table": "user",
            "operation": "create_table",
            "warning": null
        },
        {
            "id": "mig_0c966c4cee0d",
            "sql": "CREATE UNIQUE INDEX \"uniq_api_token_token_hash\" ON \"api_token\" (\"token_hash\")",
            "destructive": false,
            "generated_at": "2025-10-03T16:37:55+00:00",
            "table": "api_token",
            "operation": "add_index",
            "warning": null
        },
        {
            "id": "mig_15bd0d8e18a4",
            "sql": "CREATE INDEX \"idx_api_token_user_id\" ON \"api_token\" (\"user_id\")",
            "destructive": false,
            "generated_at": "2025-10-03T16:37:55+00:00",
            "table": "api_token",
            "operation": "add_index",
            "warning": null
        },
        {
            "id": "mig_967ce4f3fd34",
            "sql": "CREATE UNIQUE INDEX \"uniq_user_email\" ON \"user\" (\"email\")",
            "destructive": false,
            "generated_at": "2025-10-03T16:37:55+00:00",
            "table": "user",
            "operation": "add_index",
            "warning": null
        },
        {
            "id": "mig_b93b059a8555",
            "sql": "CREATE TABLE jobs (\n    id TEXT PRIMARY KEY,\n    queue TEXT NOT NULL DEFAULT 'default',\n    payload TEXT NOT NULL,\n    status TEXT NOT NULL DEFAULT 'pending' CHECK (status IN ('pending', 'processing', 'completed', 'failed')),\n    attempts INTEGER NOT NULL DEFAULT 0,\n    error TEXT,\n    run_at DATETIME NOT NULL,\n    started_at DATETIME,\n    completed_at DATETIME,\n    failed_at DATETIME,\n    created_at DATETIME NOT NULL DEFAULT CURRENT_TIMESTAMP\n);\n\n-- Create essential indexes for queue performance\nCREATE INDEX jobs_queue_status_run_at_index ON jobs (queue, status, run_at);\nCREATE INDEX jobs_status_run_at_index ON jobs (status, run_at);\nCREATE INDEX jobs_status_index ON jobs (status);",
            "destructive": false,
            "generated_at": "2025-10-03T16:38:00+00:00",
            "table": "jobs",
            "operation": "create_table",
            "description": "Create jobs table and indexes for queue system"
        },
        {
            "id": "mig_ec74db7b72be",
            "sql": "CREATE TABLE \"watch_item\" (\n  \"title\" TEXT NOT NULL,\n  \"type\" TEXT NOT NULL,\n  \"description\" TEXT,\n  \"release_year\" INTEGER,\n  \"id\" TEXT PRIMARY KEY NOT NULL DEFAULT '',\n  \"created_at\" DATETIME DEFAULT CURRENT_TIMESTAMP,\n  \"updated_at\" DATETIME DEFAULT CURRENT_TIMESTAMP\n)",
            "destructive": false,
            "generated_at": "2025-10-03T17:57:58+00:00",
            "table": "watch_item",
            "operation": "create_table",
            "warning": null
        },
        {
            "id": "mig_1855dd2a5857",
            "sql": "CREATE INDEX \"idx_watch_item_title\" ON \"watch_item\" (\"title\")",
            "destructive": false,
            "generated_at": "2025-10-03T17:57:58+00:00",
            "table": "watch_item",
            "operation": "add_index",
            "warning": null
        },
        {
            "id": "mig_1ec218d8b957",
            "sql": "CREATE INDEX \"idx_watch_item_type\" ON \"watch_item\" (\"type\")",
            "destructive": false,
            "generated_at": "2025-10-03T17:57:58+00:00",
            "table": "watch_item",
            "operation": "add_index",
            "warning": null
        },
        {
            "id": "mig_b0e5c4b70a4e",
            "sql": "CREATE INDEX \"idx_watch_item_release_year\" ON \"watch_item\" (\"release_year\")",
            "destructive": false,
            "generated_at": "2025-10-03T17:57:58+00:00",
            "table": "watch_item",
            "operation": "add_index",
            "warning": null
        },
        {
            "id": "mig_9da1573e949b",
            "sql": "CREATE TABLE \"watch_item_genre\" (\n  \"name\" TEXT NOT NULL,\n  \"watch_item_id\" TEXT NOT NULL,\n  \"id\" TEXT PRIMARY KEY NOT NULL DEFAULT '',\n  \"created_at\" DATETIME DEFAULT CURRENT_TIMESTAMP,\n  \"updated_at\" DATETIME DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (\"watch_item_id\") REFERENCES \"watch_item\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n)",
            "destructive": false,
            "generated_at": "2025-10-03T17:59:14+00:00",
            "table": "watch_item_genre",
            "operation": "create_table",
            "warning": null
        },
        {
            "id": "mig_284ca69d8cee",
            "sql": "CREATE INDEX \"idx_watch_item_genre_name\" ON \"watch_item_genre\" (\"name\")",
            "destructive": false,
            "generated_at": "2025-10-03T17:59:14+00:00",
            "table": "watch_item_genre",
            "operation": "add_index",
            "warning": null
        },
        {
            "id": "mig_7ab9b126600c",
            "sql": "CREATE INDEX \"idx_watch_item_genre_watch_item_id\" ON \"watch_item_genre\" (\"watch_item_id\")",
            "destructive": false,
            "generated_at": "2025-10-03T17:59:14+00:00",
            "table": "watch_item_genre",
            "operation": "add_index",
            "warning": null
        },
        {
            "id": "mig_ea92e20e92aa",
            "sql": "CREATE TABLE \"watch_item_season\" (\n  \"watch_item_id\" TEXT NOT NULL,\n  \"season_number\" INTEGER NOT NULL,\n  \"description\" TEXT,\n  \"release_year\" INTEGER,\n  \"id\" TEXT PRIMARY KEY NOT NULL DEFAULT '',\n  \"created_at\" DATETIME DEFAULT CURRENT_TIMESTAMP,\n  \"updated_at\" DATETIME DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (\"watch_item_id\") REFERENCES \"watch_item\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n)",
            "destructive": false,
            "generated_at": "2025-10-03T18:04:08+00:00",
            "table": "watch_item_season",
            "operation": "create_table",
            "warning": null
        },
        {
            "id": "mig_b36638564c19",
            "sql": "CREATE INDEX \"idx_watch_item_season_watch_item_id\" ON \"watch_item_season\" (\"watch_item_id\")",
            "destructive": false,
            "generated_at": "2025-10-03T18:04:08+00:00",
            "table": "watch_item_season",
            "operation": "add_index",
            "warning": null
        },
        {
            "id": "mig_42d1750c2d4c",
            "sql": "CREATE INDEX \"idx_watch_item_season_season_number\" ON \"watch_item_season\" (\"season_number\")",
            "destructive": false,
            "generated_at": "2025-10-03T18:04:08+00:00",
            "table": "watch_item_season",
            "operation": "add_index",
            "warning": null
        },
        {
            "id": "mig_4408e0ead00e",
            "sql": "CREATE INDEX \"idx_watch_item_season_release_year\" ON \"watch_item_season\" (\"release_year\")",
            "destructive": false,
            "generated_at": "2025-10-03T18:04:08+00:00",
            "table": "watch_item_season",
            "operation": "add_index",
            "warning": null
        },
        {
            "id": "mig_b8b7b35775e0",
            "sql": "CREATE TABLE \"watch_item_episode\" (\n  \"watch_item_season_id\" TEXT NOT NULL,\n  \"episode_number\" INTEGER NOT NULL,\n  \"title\" TEXT,\n  \"description\" TEXT,\n  \"id\" TEXT PRIMARY KEY NOT NULL DEFAULT '',\n  \"created_at\" DATETIME DEFAULT CURRENT_TIMESTAMP,\n  \"updated_at\" DATETIME DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (\"watch_item_season_id\") REFERENCES \"watch_item_season\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n)",
            "destructive": false,
            "generated_at": "2025-10-03T18:04:45+00:00",
            "table": "watch_item_episode",
            "operation": "create_table",
            "warning": null
        },
        {
            "id": "mig_f1596b73dbcc",
            "sql": "CREATE INDEX \"idx_watch_item_episode_watch_item_season_id\" ON \"watch_item_episode\" (\"watch_item_season_id\")",
            "destructive": false,
            "generated_at": "2025-10-03T18:04:45+00:00",
            "table": "watch_item_episode",
            "operation": "add_index",
            "warning": null
        },
        {
            "id": "mig_1c93f5ff5b8b",
            "sql": "CREATE INDEX \"idx_watch_item_episode_episode_number\" ON \"watch_item_episode\" (\"episode_number\")",
            "destructive": false,
            "generated_at": "2025-10-03T18:04:45+00:00",
            "table": "watch_item_episode",
            "operation": "add_index",
            "warning": null
        },
        {
            "id": "mig_541a8d5ff019",
            "sql": "CREATE TABLE \"watch_item_movie\" (\n  \"watch_item_id\" TEXT NOT NULL,\n  \"director\" TEXT,\n  \"duration_minutes\" INTEGER,\n  \"id\" TEXT PRIMARY KEY NOT NULL DEFAULT '',\n  \"created_at\" DATETIME DEFAULT CURRENT_TIMESTAMP,\n  \"updated_at\" DATETIME DEFAULT CURRENT_TIMESTAMP,\n  FOREIGN KEY (\"watch_item_id\") REFERENCES \"watch_item\" (\"id\") ON DELETE CASCADE ON UPDATE CASCADE\n)",
            "destructive": false,
            "generated_at": "2025-10-03T18:05:22+00:00",
            "table": "watch_item_movie",
            "operation": "create_table",
            "warning": null
        },
        {
            "id": "mig_ab900fa74e69",
            "sql": "CREATE INDEX \"idx_watch_item_movie_watch_item_id\" ON \"watch_item_movie\" (\"watch_item_id\")",
            "destructive": false,
            "generated_at": "2025-10-03T18:05:22+00:00",
            "table": "watch_item_movie",
            "operation": "add_index",
            "warning": null
        },
        {
            "id": "mig_4f1a1d4a52bd",
            "sql": "CREATE INDEX \"idx_watch_item_movie_director\" ON \"watch_item_movie\" (\"director\")",
            "destructive": false,
            "generated_at": "2025-10-03T18:05:22+00:00",
            "table": "watch_item_movie",
            "operation": "add_index",
            "warning": null
        }
    ]
}